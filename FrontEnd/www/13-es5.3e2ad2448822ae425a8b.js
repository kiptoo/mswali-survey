!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{X3zk:function(n,i,t){"use strict";t.r(i),t.d(i,"LoginPageModule",(function(){return w}));var o,s,a,l=t("ofXK"),u=t("3Pt+"),c=t("TEn/"),d=t("tyNb"),b=t("mrSG"),g=t("EnSQ"),p=t("7ch9"),m=t("fXoL"),h=function(){return["/register"]},f=[{path:"",component:(o=function(){function n(r,i,t,o,s,a){e(this,n),this.loading=r,this.navCtrl=i,this.router=t,this.dataService=o,this.formBuilder=s,this.alertController=a}var i,t,o;return i=n,(t=[{key:"ngOnInit",value:function(){this.createForm()}},{key:"createForm",value:function(){this.loginForm=this.formBuilder.group({email:["",[u.p.required,u.p.email]],password:["",[u.p.required,u.p.minLength(3)]]})}},{key:"signUp",value:function(){this.router.navigate(["register"])}},{key:"presentAlert",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:"Login",message:e,buttons:["OK"]});case 2:return n=r.sent,r.next=5,n.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"login",value:function(){var e=this;this.disabled=!0,this.loading.present(),this.validate()&&(console.log("call api"),this.userReq={email:this.loginForm.value.email,password:this.loginForm.value.password},this.dataService.login(this.userReq).subscribe((function(r){e.loading.dismiss(),localStorage.setItem("mswalitoken",JSON.stringify(r)),localStorage.setItem("isLoggedIn","true"),console.log(localStorage.getItem("mswalitoken")),e.loginForm.reset(),e.router.navigateByUrl("home")}),(function(r){console.log(r),e.loading.dismiss(),e.errorMsg=r.error.msg,e.presentAlert(e.errorMsg)})))}},{key:"validate",value:function(){if(this.errorMsg="",this.loginForm.valid)return!0;var e=this.loginForm.controls.mobile,r=this.loginForm.controls.password;return!e.valid&&e.errors.required?this.errorMsg="Please enter your username":!r.valid&&r.errors.required?this.errorMsg="Please enter your password":!r.valid&&r.errors.minlength&&(this.errorMsg="Sorry, you have entered an invalid username / password"),!1}}])&&r(i.prototype,t),o&&r(i,o),n}(),o.\u0275fac=function(e){return new(e||o)(m.Hb(p.a),m.Hb(c.I),m.Hb(d.g),m.Hb(g.a),m.Hb(u.c),m.Hb(c.a))},o.\u0275cmp=m.Bb({type:o,selectors:[["app-login"]],decls:22,vars:4,consts:[["padding",""],[1,"ion-padding",3,"formGroup"],["justify-content-center","",1,"ion-padding"],["align-self-center","","size-md","6","size-lg","5","size-xs","12",1,"ion-padding"],["text-center",""],["type","text","formControlName","email","placeholder","email","required","",1,"input","ion-padding"],["name","password","type","password","formControlName","password","placeholder","Password","required","",1,"input","ion-padding"],["size","large","type","submit","expand","block",3,"disabled","click"],["routerLinkActive","router-link-active",1,"ion-padding",3,"routerLink"]],template:function(e,r){1&e&&(m.Kb(0,"ion-content",0),m.Kb(1,"form",1),m.Kb(2,"ion-grid"),m.Kb(3,"ion-row",2),m.Kb(4,"ion-col",3),m.Kb(5,"div",4),m.Kb(6,"h3"),m.hc(7,"Login"),m.Jb(),m.Jb(),m.Kb(8,"div",0),m.Kb(9,"label"),m.hc(10,"Username"),m.Jb(),m.Kb(11,"ion-item"),m.Ib(12,"ion-input",5),m.Jb(),m.Kb(13,"label"),m.hc(14,"password"),m.Jb(),m.Kb(15,"ion-item"),m.Ib(16,"ion-input",6),m.Jb(),m.Jb(),m.Kb(17,"div",0),m.Kb(18,"ion-button",7),m.Rb("click",(function(){return r.login()})),m.hc(19,"Login"),m.Jb(),m.Jb(),m.Kb(20,"a",8),m.hc(21,"Register"),m.Jb(),m.Jb(),m.Jb(),m.Jb(),m.Jb(),m.Jb()),2&e&&(m.xb(1),m.Yb("formGroup",r.loginForm),m.xb(17),m.Yb("disabled",!r.loginForm.valid),m.xb(2),m.Yb("routerLink",m.ac(3,h)))},directives:[c.m,u.q,u.k,u.e,c.n,c.y,c.l,c.r,c.q,c.N,u.j,u.d,u.o,c.d,d.j,d.i,c.L],styles:[""]}),o)}],v=((a=function r(){e(this,r)}).\u0275mod=m.Fb({type:a}),a.\u0275inj=m.Eb({factory:function(e){return new(e||a)},imports:[[d.k.forChild(f)],d.k]}),a),w=((s=function r(){e(this,r)}).\u0275mod=m.Fb({type:s}),s.\u0275inj=m.Eb({factory:function(e){return new(e||s)},imports:[[l.b,u.g,u.n,c.E,v]]}),s)}}])}();