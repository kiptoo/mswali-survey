(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{X3zk:function(e,r,i){"use strict";i.r(r),i.d(r,"LoginPageModule",(function(){return m}));var o=i("ofXK"),t=i("3Pt+"),n=i("TEn/"),s=i("tyNb"),a=i("mrSG"),l=i("EnSQ"),d=i("7ch9"),b=i("fXoL");const c=function(){return["/register"]},g=[{path:"",component:(()=>{class e{constructor(e,r,i,o,t,n){this.loading=e,this.navCtrl=r,this.router=i,this.dataService=o,this.formBuilder=t,this.alertController=n}ngOnInit(){this.createForm()}createForm(){this.loginForm=this.formBuilder.group({email:["",[t.p.required,t.p.email]],password:["",[t.p.required,t.p.minLength(3)]]})}signUp(){this.router.navigate(["register"])}presentAlert(e){return Object(a.a)(this,void 0,void 0,(function*(){const r=yield this.alertController.create({header:"Login",message:e,buttons:["OK"]});yield r.present()}))}login(){this.disabled=!0,this.loading.present(),this.validate()&&(console.log("call api"),this.userReq={email:this.loginForm.value.email,password:this.loginForm.value.password},this.dataService.login(this.userReq).subscribe(e=>{this.loading.dismiss(),localStorage.setItem("mswalitoken",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),console.log(localStorage.getItem("mswalitoken")),this.loginForm.reset(),this.router.navigateByUrl("home")},e=>{console.log(e),this.loading.dismiss(),this.errorMsg=e.error.msg,this.presentAlert(this.errorMsg)}))}validate(){if(this.errorMsg="",this.loginForm.valid)return!0;{let e=this.loginForm.controls.mobile,r=this.loginForm.controls.password;return!e.valid&&e.errors.required?this.errorMsg="Please enter your username":!r.valid&&r.errors.required?this.errorMsg="Please enter your password":!r.valid&&r.errors.minlength&&(this.errorMsg="Sorry, you have entered an invalid username / password"),!1}}}return e.\u0275fac=function(r){return new(r||e)(b.Hb(d.a),b.Hb(n.I),b.Hb(s.g),b.Hb(l.a),b.Hb(t.c),b.Hb(n.a))},e.\u0275cmp=b.Bb({type:e,selectors:[["app-login"]],decls:22,vars:4,consts:[["padding",""],[1,"ion-padding",3,"formGroup"],["justify-content-center","",1,"ion-padding"],["align-self-center","","size-md","6","size-lg","5","size-xs","12",1,"ion-padding"],["text-center",""],["type","text","formControlName","email","placeholder","email","required","",1,"input","ion-padding"],["name","password","type","password","formControlName","password","placeholder","Password","required","",1,"input","ion-padding"],["size","large","type","submit","expand","block",3,"disabled","click"],["routerLinkActive","router-link-active",1,"ion-padding",3,"routerLink"]],template:function(e,r){1&e&&(b.Kb(0,"ion-content",0),b.Kb(1,"form",1),b.Kb(2,"ion-grid"),b.Kb(3,"ion-row",2),b.Kb(4,"ion-col",3),b.Kb(5,"div",4),b.Kb(6,"h3"),b.hc(7,"Login"),b.Jb(),b.Jb(),b.Kb(8,"div",0),b.Kb(9,"label"),b.hc(10,"Username"),b.Jb(),b.Kb(11,"ion-item"),b.Ib(12,"ion-input",5),b.Jb(),b.Kb(13,"label"),b.hc(14,"password"),b.Jb(),b.Kb(15,"ion-item"),b.Ib(16,"ion-input",6),b.Jb(),b.Jb(),b.Kb(17,"div",0),b.Kb(18,"ion-button",7),b.Rb("click",(function(){return r.login()})),b.hc(19,"Login"),b.Jb(),b.Jb(),b.Kb(20,"a",8),b.hc(21,"Register"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.xb(1),b.Yb("formGroup",r.loginForm),b.xb(17),b.Yb("disabled",!r.loginForm.valid),b.xb(2),b.Yb("routerLink",b.ac(3,c)))},directives:[n.m,t.q,t.k,t.e,n.n,n.y,n.l,n.r,n.q,n.N,t.j,t.d,t.o,n.d,s.j,s.i,n.L],styles:[""]}),e})()}];let u=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(r){return new(r||e)},imports:[[s.k.forChild(g)],s.k]}),e})(),m=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(r){return new(r||e)},imports:[[o.b,t.g,t.n,n.E,u]]}),e})()}}]);